import { UnsubscribeFn } from './ApiClient';
import Client from './Client';
import { messageApi } from '@xmtp/proto';
export declare type MessageDecoder<M> = (env: messageApi.Envelope) => Promise<M | undefined>;
export declare type ContentTopicUpdater<M> = (msg: M) => string[] | undefined;
/**
 * Stream implements an Asynchronous Iterable over messages received from a topic.
 * As such can be used with constructs like for-await-of, yield*, array destructing, etc.
 */
export default class Stream<T> {
    topics: string[];
    client: Client;
    messages: T[];
    resolvers: ((value: IteratorResult<T>) => void)[];
    callback: ((env: messageApi.Envelope) => Promise<void>) | undefined;
    unsubscribeFn?: UnsubscribeFn;
    constructor(client: Client, topics: string[], decoder: MessageDecoder<T>, contentTopicUpdater?: ContentTopicUpdater<T>);
    private newMessageCallback;
    private start;
    static create<T>(client: Client, topics: string[], decoder: MessageDecoder<T>, contentTopicUpdater?: ContentTopicUpdater<T>): Promise<Stream<T>>;
    [Symbol.asyncIterator](): AsyncIterableIterator<T>;
    return(): Promise<IteratorResult<T>>;
    next(): Promise<IteratorResult<T>>;
    private resubscribeToTopics;
}
